using KDtree

dims = 3
n_points = [10^i for i in 3:6]
ks = [1, 3, 10, 50, 100, 500]

times = Array(Float64, length(ks), length(n_points))

# Compile it
tree = KDTree(randn(2,2))
k_nearest_neighbour(tree, zeros(2), 1)

for (i, k) in enumerate(ks)
    for (j , n_point) in enumerate(n_points)
        data = randn(dims, n_point)
        tree = KDTree(data)
        times[i,j]  = @elapsed k_nearest_neighbour(tree, zeros(dims), k)
    end
end

println(times)

#=
Laptop with PQ (worse)
[2.4708e-5 2.8129e-5 8.7429e-5 6.6523e-5
 3.3451e-5 5.1317e-5 7.7546e-5 9.085e-5
 0.000120881 9.123e-5 0.000261909 0.000169537
 0.000527238 0.000776601 0.000616948 0.000497207
 0.000814234 0.000860229 0.001386707 0.002061814
 0.003026199 0.004606771 0.007015262 0.005611449]

Laptop after type fix:
[9.884e-6 1.1024e-5 2.6229e-5 3.9533e-5
 1.4445e-5 1.1403e-5 4.9036e-5 4.4855e-5
 2.1287e-5 2.8129e-5 6.0821e-5 6.7282e-5
 6.6523e-5 7.6406e-5 0.000134946 0.000138747
 0.000103015 0.000116319 0.000224275 0.000247083
 0.000675108 0.001182579 0.002503143 0.001593496]

Laptop:
[1.9767e-5 2.1287e-5 5.4739e-5 6.1201e-5
 2.3948e-5 2.6989e-5 7.6026e-5 6.1581e-5
 3.5732e-5 5.5118e-5 0.000101114 8.5909e-5
 0.000107196 0.000117839 0.000181701 0.000172198
 0.000179801 0.000174479 0.000315886 0.000377467
 0.000927512 0.001398111 0.002061054 0.002195619]


2015-02-03: ArrayViews:
[1.3996e-5 2.1771e-5 5.1316e-5 4.4474e-5
 2.0837e-5 2.5502e-5 5.9402e-5 6.8732e-5
 3.2034e-5 4.1364e-5 8.7393e-5 8.2106e-5
 8.5838e-5 8.7394e-5 0.000183183 0.000170121
 0.000156437 0.000143063 0.000305409 0.000290792
 0.000695723 0.001162545 0.001638387 0.001731067]

2015-02-02:
[2.3015e-5 2.1771e-5 7.0288e-5 6.0958e-5
 2.7368e-5 3.5143e-5 8.957e-5 7.7752e-5
 6.0647e-5 5.0072e-5 0.000104499 0.000111029
 0.000194691 0.000216772 0.000293591 0.000318472
 0.000385027 0.000359835 0.000650316 0.000582517
 0.003119404 0.005313561 0.006453713 0.006805152]
 =#
